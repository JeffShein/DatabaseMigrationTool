<Window x:Class="DatabaseMigrationTool.DetailedProgressWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Operation Progress" Height="600" Width="800"
        WindowStartupLocation="CenterOwner" 
        ResizeMode="CanResize">
    
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,15">
            <TextBlock x:Name="OperationTitleText" FontSize="16" FontWeight="Bold" Text="Database Export in Progress"/>
            <TextBlock x:Name="OperationSubtitleText" Foreground="Gray" Text="Exporting data from source database..."/>
        </StackPanel>
        
        <!-- Overall Progress -->
        <GroupBox Grid.Row="1" Header="Overall Progress" Margin="0,0,0,15">
            <Grid Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Main Progress Bar -->
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Progress:" Margin="0,0,10,5" VerticalAlignment="Center"/>
                <StackPanel Grid.Row="0" Grid.Column="1" Margin="0,0,0,5">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ProgressBar Grid.Column="0" x:Name="OverallProgressBar" Height="20" Margin="0,0,10,0"/>
                        <TextBlock Grid.Column="1" x:Name="OverallPercentageText" Text="0%" VerticalAlignment="Center" MinWidth="40"/>
                    </Grid>
                    <TextBlock x:Name="OverallProgressText" FontSize="11" Foreground="Gray" Margin="0,2,0,0"/>
                </StackPanel>
                
                <!-- Stage Information -->
                <TextBlock Grid.Row="1" Grid.Column="0" Text="Stage:" Margin="0,0,10,5" VerticalAlignment="Center"/>
                <TextBlock Grid.Row="1" Grid.Column="1" x:Name="StageText" Margin="0,0,0,5"/>
                
                <!-- Time Information -->
                <TextBlock Grid.Row="2" Grid.Column="0" Text="Elapsed:" Margin="0,0,10,5" VerticalAlignment="Center"/>
                <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock x:Name="ElapsedTimeText" Text="00:00:00"/>
                    <TextBlock Text=" | ETA: " Margin="20,0,0,0"/>
                    <TextBlock x:Name="EstimatedTimeText" Text="Calculating..."/>
                </StackPanel>
                
                <!-- Performance Information -->
                <TextBlock Grid.Row="3" Grid.Column="0" Text="Performance:" Margin="0,0,10,0" VerticalAlignment="Center"/>
                <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal">
                    <TextBlock x:Name="PerformanceText" Text="0 rows/s | 0 B/s"/>
                </StackPanel>
            </Grid>
        </GroupBox>
        
        <!-- Current Table Progress -->
        <GroupBox Grid.Row="2" Header="Current Table" Margin="0,0,0,15" x:Name="CurrentTableGroup">
            <Grid Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Table:" Margin="0,0,10,5" VerticalAlignment="Center"/>
                <TextBlock Grid.Row="0" Grid.Column="1" x:Name="CurrentTableText" FontWeight="Bold" Margin="0,0,0,5"/>
                
                <TextBlock Grid.Row="1" Grid.Column="0" Text="Progress:" Margin="0,0,10,5" VerticalAlignment="Center"/>
                <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,0,0,5">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ProgressBar Grid.Column="0" x:Name="TableProgressBar" Height="16" Margin="0,0,10,0"/>
                        <TextBlock Grid.Column="1" x:Name="TableProgressText" Text="0 / 0" VerticalAlignment="Center" FontSize="11"/>
                    </Grid>
                </StackPanel>
                
                <TextBlock Grid.Row="2" Grid.Column="0" Text="Size:" Margin="0,0,10,0" VerticalAlignment="Center"/>
                <TextBlock Grid.Row="2" Grid.Column="1" x:Name="TableSizeText" Text="0 B / 0 B"/>
            </Grid>
        </GroupBox>
        
        <!-- Detailed Information Tabs -->
        <TabControl Grid.Row="3" Margin="0,0,0,15">
            <!-- Tables Tab -->
            <TabItem Header="Tables">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <Grid Grid.Row="0" Margin="0,5,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <TextBlock Text="âœ“ Completed: " Foreground="Green"/>
                            <TextBlock x:Name="CompletedCountText" Text="0" Foreground="Green" FontWeight="Bold"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                            <TextBlock Text="âš  Skipped: " Foreground="Orange"/>
                            <TextBlock x:Name="SkippedCountText" Text="0" Foreground="Orange" FontWeight="Bold"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                            <TextBlock Text="ðŸ“Š Total: "/>
                            <TextBlock x:Name="TotalTablesText" Text="0" FontWeight="Bold"/>
                        </StackPanel>
                    </Grid>
                    
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Completed Tables:" FontWeight="Bold" Margin="0,0,0,5"/>
                            <ListView x:Name="CompletedTablesList" MaxHeight="100" Margin="0,0,0,10">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="âœ“" Foreground="Green" Margin="0,0,5,0"/>
                                            <TextBlock Text="{Binding}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                            
                            <TextBlock Text="Skipped Tables:" FontWeight="Bold" Margin="0,10,0,5"/>
                            <ListView x:Name="SkippedTablesList" MaxHeight="100">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="âš " Foreground="Orange" Margin="0,0,5,0"/>
                                            <TextBlock Text="{Binding}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </TabItem>
            
            <!-- Warnings Tab -->
            <TabItem Header="Warnings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ListView x:Name="WarningsList">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="âš " Foreground="Orange" Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </ScrollViewer>
            </TabItem>
            
            <!-- Log Tab -->
            <TabItem Header="Log">
                <ScrollViewer x:Name="LogScrollViewer" VerticalScrollBarVisibility="Auto">
                    <TextBox x:Name="LogTextBox" IsReadOnly="True" FontFamily="Consolas" FontSize="11"
                            Background="Black" Foreground="LightGray" Padding="10"
                            TextWrapping="Wrap" AcceptsReturn="True"/>
                </ScrollViewer>
            </TabItem>
        </TabControl>
        
        <!-- Action Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="PauseResumeButton" Content="Pause" Margin="0,0,10,0" Padding="15,5" Click="PauseResume_Click"/>
            <Button x:Name="CancelButton" Content="Cancel" Margin="0,0,10,0" Padding="15,5" Click="Cancel_Click"/>
            <Button x:Name="CloseButton" Content="Close" Padding="15,5" Click="Close_Click" IsEnabled="False"/>
        </StackPanel>
    </Grid>
</Window>